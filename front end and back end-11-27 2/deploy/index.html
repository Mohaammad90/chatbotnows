<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø± â€“ ACS PRO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="../style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../auth/auth.js"></script>

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 45%, #020617 100%);
      color: #e5e7eb;
      min-height: 100vh;
    }

    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px 18px 80px;
    }

    .breadcrumb {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 12px;
    }

    .breadcrumb span {
      color: #e5e7eb;
    }

    .page-header {
      margin-bottom: 20px;
    }

    .page-title {
      font-size: 28px;
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .page-title .emoji {
      font-size: 30px;
    }

    .page-subtitle {
      color: #9ca3af;
      font-size: 14px;
      max-width: 700px;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 0.9fr);
      gap: 18px;
      align-items: flex-start;
    }

    @media (max-width: 960px) {
      .layout {
        grid-template-columns: minmax(0,1fr);
      }
    }

    .card {
      background: rgba(15, 23, 42, 0.97);
      border-radius: 22px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      padding: 18px 18px 20px;
      box-shadow: 0 20px 55px rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(16px);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .card-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 17px;
      font-weight: 600;
    }

    .card-title .icon {
      font-size: 22px;
    }

    .card-subtitle {
      font-size: 13px;
      color: #9ca3af;
    }

    .badge {
      font-size: 11px;
      padding: 4px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      color: #cbd5e1;
      white-space: nowrap;
    }

    .summary-line {
      font-size: 14px;
      margin-bottom: 6px;
    }

    .summary-label {
      color: #9ca3af;
    }

    .summary-value {
      color: #e5e7eb;
      font-weight: 500;
    }

    .channels-grid {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .channel-card {
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.10), rgba(15, 23, 42, 0.98));
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.65);
      padding: 14px 14px 16px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.8);
    }

    .channel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .channel-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 16px;
      font-weight: 600;
    }

    .channel-title .emoji {
      font-size: 20px;
    }

    .channel-subtitle {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 10px;
    }

    .field-block {
      margin-bottom: 10px;
    }

    .field-label {
      font-size: 12px;
      color: #cbd5e1;
      margin-bottom: 4px;
    }

    .field-row {
      display: flex;
      gap: 8px;
      align-items: stretch;
    }

    .field-row input,
    .field-row textarea {
      flex: 1;
      border-radius: 12px;
      border: 1px solid rgba(51, 65, 85, 0.95);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      font-size: 13px;
      padding: 10px 12px;
      outline: none;
    }

    .field-row textarea {
      min-height: 90px;
      resize: vertical;
    }

    .copy-btn {
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background: rgba(15, 23, 42, 0.98);
      color: #e5e7eb;
      font-size: 12px;
      padding: 0 12px;
      cursor: pointer;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .copy-btn:hover {
      background: rgba(51, 65, 85, 0.95);
    }

    .small-note {
      font-size: 11px;
      color: #6b7280;
      margin-top: 2px;
    }

    .top-actions {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 10px;
    }

    .btn-link {
      font-size: 12px;
      color: #93c5fd;
      text-decoration: none;
    }

    .btn-link:hover {
      text-decoration: underline;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(15, 23, 42, 0.99);
      color: #e5e7eb;
      border-radius: 999px;
      border: 1px solid rgba(52, 211, 153, 0.9);
      padding: 9px 15px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.9);
      z-index: 9999;
      transform: translateY(120%);
      opacity: 0;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }

    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    pre.code-block {
      margin: 0;
      white-space: pre-wrap;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      background: transparent;
      color: #e5e7eb;
    }
  </style>
</head>
<body>
  <!-- User bar -->
  <div id="user-bar" style="padding:16px 24px;"></div>

  <div class="page">
    <div class="breadcrumb">
      ACS PRO / <span>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø±</span>
    </div>

    <div class="page-header">
      <div class="page-title">
        <span class="emoji">ğŸš€</span>
        <span>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø± Ùˆ Ø§Ù„Ø±Ø¨Ø·</span>
      </div>
      <div class="page-subtitle">
        Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ØªØ¹Ø·ÙŠÙƒ ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬Ù‡Ø§ Ù„Ø±Ø¨Ø· Ù‡Ø°Ø§ Ø§Ù„Ø¨ÙˆØª Ù…Ø¹ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…ØŒ ÙˆØ§ØªØ³Ø§Ø¨ØŒ ÙÙŠØ³Ø¨ÙˆÙƒ Ù…Ø§Ø³Ù†Ø¬Ø±ØŒ ÙˆÙ…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.
        Ø§Ù†Ø³Ø® Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© ÙˆØ§Ù„ØµÙ‚Ù‡Ø§ ÙÙŠ Ù…Ù†ØµØ§ØªÙƒ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.
      </div>
    </div>

    <div class="top-actions">
      <a class="btn-link" href="../dashboard/index.html">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
    </div>

    <div class="layout">
      <!-- LEFT: channels -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">
              <span class="icon">ğŸ“¡</span>
              <span>Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù†Ø´Ø±</span>
            </div>
            <div class="card-subtitle">
              Ø§Ø®ØªØ± Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„Ø¨ÙˆØª. ÙƒÙ„ Ù‚Ø³Ù… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ùˆ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ù†Ø³Ø®.
            </div>
          </div>
          <div class="badge" id="deployStatusBadge">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        </div>

        <div class="channels-grid">
          <!-- Telegram -->
          <div class="channel-card">
            <div class="channel-header">
              <div class="channel-title">
                <span class="emoji">ğŸ“²</span>
                <span>ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</span>
              </div>
              <div class="badge">BotFather + Webhook</div>
            </div>
            <div class="channel-subtitle">
              Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ø¯Ø§Ø®Ù„ <strong>BotFather</strong> ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù€ Webhook ÙÙŠ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù….
            </div>

            <div class="field-block">
              <div class="field-label">Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø¯Ø¡ (Start link) Ø§Ù„Ù…Ø®ØµØµ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¨ÙˆØª</div>
              <div class="field-row">
                <input id="tg-start-link" readonly />
                <button class="copy-btn" onclick="copyInput('tg-start-link')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
              <div class="small-note">Ø´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹ Ø¹Ù…Ù„Ø§Ø¦ÙƒØŒ Ø£Ùˆ Ø¶Ø¹Ù‡ ÙÙŠ Ø§Ù„Ø¨Ø§ÙŠÙˆ / Ø§Ù„Ù…ÙˆÙ‚Ø¹.</div>
            </div>

            <div class="field-block">
              <div class="field-label">Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ Webhook Ø§Ù„Ø®Ø§Øµ Ø¨ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</div>
              <div class="field-row">
                <input id="tg-webhook-url" readonly />
                <button class="copy-btn" onclick="copyInput('tg-webhook-url')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
              <div class="small-note">Ø§Ø³ØªØ®Ø¯Ù…Ù‡ Ù…Ø¹ Ø£Ù…Ø± <code>setWebhook</code> ÙÙŠ ÙˆØ§Ø¬Ù‡Ø© Telegram Bot API.</div>
            </div>

            <div class="field-block">
              <div class="field-label">Ø£Ù…Ø± Ø¶Ø¨Ø· Ø§Ù„Ù€ Webhook (Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­)</div>
              <div class="field-row">
                <textarea id="tg-webhook-command" readonly></textarea>
                <button class="copy-btn" onclick="copyTextArea('tg-webhook-command')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
              <div class="small-note">
                Ø§ÙØªØ­ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ Ø¨Ø¹Ø¯ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ <code>YOUR_BOT_TOKEN</code> Ø¨Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù…Ù† BotFather.
              </div>
            </div>
          </div>

          <!-- WhatsApp -->
          <div class="channel-card">
            <div class="channel-header">
              <div class="channel-title">
                <span class="emoji">ğŸ’¬</span>
                <span>ÙˆØ§ØªØ³Ø§Ø¨ Cloud API</span>
              </div>
              <div class="badge">Meta Developer</div>
            </div>
            <div class="channel-subtitle">
              Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø§Ø®Ù„ <strong>Meta for Developers</strong> ÙÙŠ Ù‚Ø³Ù… WhatsApp Cloud API (Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù€ Webhook).
            </div>

            <div class="field-block">
              <div class="field-label">Webhook URL Ù„ÙˆØ§ØªØ³Ø§Ø¨</div>
              <div class="field-row">
                <input id="wa-webhook-url" readonly />
                <button class="copy-btn" onclick="copyInput('wa-webhook-url')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
              <div class="small-note">Ø¶Ø¹Ù‡ ÙÙŠ Ø®Ø§Ù†Ø© <strong>Callback URL</strong>.</div>
            </div>

            <div class="field-block">
              <div class="field-label">Verify Token (Ø§Ø®ØªÙØ± ÙƒÙ„Ù…Ø© Ù‚ÙˆÙŠØ© Ø¨Ù†ÙØ³Ùƒ)</div>
              <div class="field-row">
                <input id="wa-verify-token" value="acspro-verify-token" />
                <button class="copy-btn" onclick="copyInput('wa-verify-token')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
              <div class="small-note">
                Ù†ÙØ³ Ø§Ù„Ù€ Verify Token ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ø¶Ø¨ÙˆØ·Ø§Ù‹ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø§Ùƒ Ø¥Ù†Ø¯ Ù„Ø§Ø­Ù‚Ø§Ù‹.
              </div>
            </div>

            <div class="field-block">
              <div class="field-label">Bot ID Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ ACS PRO</div>
              <div class="field-row">
                <input id="wa-bot-id" readonly />
                <button class="copy-btn" onclick="copyInput('wa-bot-id')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
              <div class="small-note">ÙŠÙ…ÙƒÙ†Ùƒ ØªØ®Ø²ÙŠÙ† Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¹Ø±Ù ÙÙŠ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù€ Meta Ø£Ùˆ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ø±Ø¨Ø· Ø§Ù„Ù‚Ù†Ø§Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨ÙˆØª.</div>
            </div>
          </div>

          <!-- Messenger -->
          <div class="channel-card">
            <div class="channel-header">
              <div class="channel-title">
                <span class="emoji">ğŸ“¨</span>
                <span>ÙÙŠØ³Ø¨ÙˆÙƒ Ù…Ø§Ø³Ù†Ø¬Ø±</span>
              </div>
              <div class="badge">Meta Webhook</div>
            </div>
            <div class="channel-subtitle">
              Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ø¹Ù†Ø¯ Ø¥Ø¹Ø¯Ø§Ø¯ Webhook Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø§Ø³Ù†Ø¬Ø± ÙÙŠ Meta Developer (Subscriptions: messages, messaging_postbacks...).
            </div>

            <div class="field-block">
              <div class="field-label">Webhook URL Ù„Ù…Ø§Ø³Ù†Ø¬Ø±</div>
              <div class="field-row">
                <input id="msgr-webhook-url" readonly />
                <button class="copy-btn" onclick="copyInput('msgr-webhook-url')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
            </div>

            <div class="field-block">
              <div class="field-label">Verify Token (Ù†ÙØ³Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ùˆ Ø£Ø­Ø¨Ø¨Øª)</div>
              <div class="field-row">
                <input id="msgr-verify-token" value="acspro-verify-token" />
                <button class="copy-btn" onclick="copyInput('msgr-verify-token')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
              <div class="small-note">
                Ø³ÙŠÙ‚ÙˆÙ… ACS PRO Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„ØªÙˆÙƒÙ† Ø¹Ù†Ø¯ Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙÙŠØ³Ø¨ÙˆÙƒ.
              </div>
            </div>

            <div class="field-block">
              <div class="field-label">Bot ID Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ ACS PRO</div>
              <div class="field-row">
                <input id="msgr-bot-id" readonly />
                <button class="copy-btn" onclick="copyInput('msgr-bot-id')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
            </div>
          </div>

          <!-- Website widget -->
          <div class="channel-card">
            <div class="channel-header">
              <div class="channel-title">
                <span class="emoji">ğŸŒ</span>
                <span>Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (ÙˆÙŠØ¯Ø¬Øª Ø¯Ø±Ø¯Ø´Ø©)</span>
              </div>
              <div class="badge">Embed Code</div>
            </div>
            <div class="channel-subtitle">
              Ø§Ù†Ø³Ø® Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙˆØ§Ù„ØµÙ‚Ù‡ Ø¯Ø§Ø®Ù„ &lt;head&gt; Ø£Ùˆ Ù‚Ø¨Ù„ &lt;/body&gt; ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ (ÙˆÙˆØ±Ø¯Ø¨Ø±ÙŠØ³ / HTML / Ø£ÙŠ Ù…Ù†ØµØ© Ø£Ø®Ø±Ù‰).
            </div>

            <div class="field-block">
              <div class="field-label">ÙƒÙˆØ¯ Ø§Ù„ØªØ¶Ù…ÙŠÙ† (Embed Script)</div>
              <div class="field-row">
                <textarea id="web-embed-code" readonly></textarea>
                <button class="copy-btn" onclick="copyTextArea('web-embed-code')">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
              <div class="small-note">
                Ù„Ø§Ø­Ù‚Ø§Ù‹ ÙŠÙ…ÙƒÙ†Ù†Ø§ ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ù„ÙˆØ§Ù†ØŒ Ø§Ù„Ù„ØºØ©ØŒ ÙˆÙ…ÙƒØ§Ù† Ø¸Ù‡ÙˆØ± Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ù† Ø®Ù„Ø§Ù„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©.
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT: bot summary -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">
              <span class="icon">ğŸ¤–</span>
              <span>Ù…Ù„Ø®Øµ Ø§Ù„Ø¨ÙˆØª</span>
            </div>
            <div class="card-subtitle">
              ØªØ£ÙƒÙŠØ¯ Ø£Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø± ØªØ®Øµ Ù‡Ø°Ø§ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù…Ø­Ø¯Ø¯.
            </div>
          </div>
          <div class="badge" id="botTemplateBadge">â€”</div>
        </div>

        <div id="botSummary">
          <div class="summary-line">
            <span class="summary-label">Ø§Ø³Ù… Ø§Ù„Ø¨ÙˆØª ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:</span>
            <span class="summary-value" id="summaryBotName">â€”</span>
          </div>
          <div class="summary-line">
            <span class="summary-label">Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ø¨ÙˆØª (Bot ID):</span>
            <span class="summary-value" id="summaryBotId">â€”</span>
          </div>
          <div class="summary-line">
            <span class="summary-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:</span>
            <span class="summary-value" id="summaryCreatedAt">â€”</span>
          </div>
          <div class="summary-line">
            <span class="summary-label">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</span>
            <span class="summary-value" id="summaryUpdatedAt">â€”</span>
          </div>

          <hr style="border-color: rgba(55,65,81,0.9); margin:16px 0;">

          <div class="summary-line">
            <span class="summary-label">Ø±Ø§Ø¨Ø· ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø¥Ù† ÙˆØ¬Ø¯):</span>
            <span class="summary-value" id="summaryTelegramLink">â€”</span>
          </div>

          <div style="margin-top:14px; font-size:12px; color:#9ca3af;">
            Ù…Ù„Ø§Ø­Ø¸Ø©: ÙØªØ­Ùƒ Ù„Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ÙŠÙ‚ÙˆÙ… Ø¨ØªØ¬Ù‡ÙŠØ² Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø´Ø± ÙˆØ±Ø¨Ø· <span style="color:#e5e7eb;">Bot ID</span> Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ù†ÙˆØ§Øª.
            ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø²Ø± Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast">
    <span id="toastMessage">ØªÙ… Ø§Ù„Ù†Ø³Ø®</span>
  </div>

  <script>
    const TELEGRAM_USERNAME = "ACS_PRO_BOT"; // Ø§Ø³Ù… Ø¨ÙˆØª ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø§Ù„Ø¹Ø§Ù…
    const BACKEND_BASE_URL = "https://acspro-backend.onrender.com";

    let currentBot = null;
    let toastEl = null;
    let toastMsgEl = null;

    function showToast(message) {
      if (!toastEl || !toastMsgEl) return;
      toastMsgEl.textContent = message;
      toastEl.classList.add("show");
      setTimeout(() => {
        toastEl.classList.remove("show");
      }, 1800);
    }

    function copyInput(id) {
      const el = document.getElementById(id);
      if (!el) return;
      el.select();
      el.setSelectionRange(0, 99999);
      document.execCommand("copy");
      showToast("âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®");
    }

    function copyTextArea(id) {
      const el = document.getElementById(id);
      if (!el) return;
      el.select();
      el.setSelectionRange(0, 99999);
      document.execCommand("copy");
      showToast("âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®");
    }

    function fillSummary(bot, startLink) {
      document.getElementById("summaryBotName").textContent = bot.bot_name || "â€”";
      document.getElementById("summaryBotId").textContent = bot.id || "â€”";
      document.getElementById("botTemplateBadge").textContent = bot.template || "â€”";

      const createdAt = bot.created_at ? new Date(bot.created_at).toLocaleString() : "â€”";
      const updatedAt = bot.updated_at || bot.updated_at === null ? new Date(bot.updated_at || bot.created_at).toLocaleString() : "â€”";

      document.getElementById("summaryCreatedAt").textContent = createdAt;
      document.getElementById("summaryUpdatedAt").textContent = updatedAt;
      document.getElementById("summaryTelegramLink").textContent = startLink || (bot.telegram_start_link || "â€”");
    }

    function fillChannels(bot, startLink) {
      const botId = bot.id;

      // Telegram
      const tgStart = startLink;
      document.getElementById("tg-start-link").value = tgStart;
      document.getElementById("tg-webhook-url").value = BACKEND_BASE_URL + "/telegram-webhook";

      const webhookCommand =
        "https://api.telegram.org/botYOUR_BOT_TOKEN/setWebhook" +
        "?url=" + encodeURIComponent(BACKEND_BASE_URL + "/telegram-webhook");
      document.getElementById("tg-webhook-command").value = webhookCommand;

      // WhatsApp
      document.getElementById("wa-webhook-url").value = BACKEND_BASE_URL + "/whatsapp-webhook";
      document.getElementById("wa-bot-id").value = botId;

      // Messenger
      document.getElementById("msgr-webhook-url").value = BACKEND_BASE_URL + "/meta-webhook";
      document.getElementById("msgr-bot-id").value = botId;

      // Website widget
      const embedCode =
`<script src="${BACKEND_BASE_URL}/widget.js"
        data-bot-id="${botId}"
        async></script>`;
    <script>
      document.getElementById("web-embed-code").value = embedCode;
    }
    
    async function loadBotAndPrepare() {
      const supabase = window.supabaseClient;
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) return;

      const params = new URLSearchParams(window.location.search);
      const botId = params.get("bot_id");
      const badge = document.getElementById("deployStatusBadge");

      if (!botId) {
        badge.textContent = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Bot ID";
        return;
      }

      const result = await supabase
        .from("bots")
        .select("*")
        .eq("id", botId)
        .eq("user_id", user.id)
        .single();

      if (result.error || !result.data) {
        console.error("Error loading bot for deploy:", result.error);
        badge.textContent = "Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙˆØª";
        return;
      }

      const bot = result.data;
      currentBot = bot;

      // Generate Telegram start link
      const tgStartLink = `https://t.me/${TELEGRAM_USERNAME}?start=${bot.id}`;

      // Mark as deployed / save telegram link for dashboard
      const update = await supabase
        .from("bots")
        .update({
          telegram_enabled: true,
          telegram_start_link: tgStartLink,
          deployed_at: new Date().toISOString()
        })
        .eq("id", bot.id)
        .eq("user_id", user.id);

      if (update.error) {
        console.error("Error marking deployed:", update.error);
        badge.textContent = "ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Ù…Ø¹ ØªÙ†Ø¨ÙŠÙ‡)";
      } else {
        badge.textContent = "Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø´Ø± âœ…";
      }

      fillSummary(bot, tgStartLink);
      fillChannels(bot, tgStartLink);
    }

    document.addEventListener("DOMContentLoaded", async function () {
      toastEl = document.getElementById("toast");
      toastMsgEl = document.getElementById("toastMessage");

      await window.acsAuth.requireAuth();
      await loadBotAndPrepare();
    });
  </script>
</body>
</html>